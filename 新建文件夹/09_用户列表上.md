# 九、用户列表上



###1.打开 UserList.jsx 文件 搜索axios请求
####a. 在映射文件中通过数据库命令得到数据后,参照之前json-server的数据,返回符合格式的数据
####b. 根据不同请求编写不同的拦截,使拦截前端的请求后将数据返回给前端

得到所有的用户数据
```
/*------Users------*/
//users类中新增role属性

@Data
@EqualsAndHashCode(callSuper = false)
public class Users implements Serializable {

    private static final long serialVersionUID = 1L;

    @TableId(value = "id", type = IdType.AUTO)
    private Integer id;

    private String username;

    private String password;
    @TableField("roleId")
    private Integer roleId;

    private String name;

    private String phone;

    private Integer block;

    //新增
    @TableField(exist = false)
    private Roles role;


    @TableField(exist = false)
    private List<String> rights;
}
```
```
/*------UsersDao------*/
@Mapper
public interface UsersDao extends BaseMapper<Users> {
    List<Users> getAllUser();
}
```
```
/*------UsersDao.xml------*/
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.carsever.dao.UsersDao">

    <!--
            手动指定字段与实体属性的映射关系
            column 数据表的字段名称
            property 实体类的属性名称
    -->
    <resultMap id="GetAllUsers_Role" type="com.carsever.pojo.Users">
        <id column="id" property="id"></id>
        <!--        -->
        <result column="rid" property="role.id"></result>
        <result column="roleName" property="role.roleName"></result>
        <result column="roleType" property="role.roleType"></result>
    </resultMap>


    <select id="getAllUser" resultMap="GetAllUsers_Role">
        SELECT *,roles.id rid FROM users users,roles roles WHERE users.roleId=roles.id
    </select>

</mapper>

```
```
/*------IUsersService------*/
public interface IUsersService extends IService<Users> {
     List<Users> getAllUser();
}
```
```
/*------UsersServiceImpl------*/
@Service
public class UsersServiceImpl extends ServiceImpl<UsersDao, Users> implements IUsersService {

    @Autowired
    UsersDao usersDao;

    @Override
    public List<Users> getAllUser() {
        return usersDao.getAllUser();
    }

}
```

```
/*------UsersController------*/
@RestController
@RequestMapping("/users")
public class UsersController {
    @GetMapping("/roles")
    public WebResult getAllUserRole() {
        List<Users> allUser = usersService.getAllUser();
        return WebResult.success(allUser);
    }
}
```